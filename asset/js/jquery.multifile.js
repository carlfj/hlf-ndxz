function MultiSelector(e,d){this.list_target=e;this.id=this.count=0;this.max=d?d:-1;this.addElement=function(a){if(a.tagName=="INPUT"&&a.type=="file"){a.name="filename[]";a.multi_selector=this;a.onchange=function(){var b=document.createElement("input");b.type="file";this.parentNode.insertBefore(b,this);this.multi_selector.addElement(b);this.multi_selector.addListRow(this);this.style.position="absolute";this.style.left="-1000px"};if(this.max!=-1&&this.count>=this.max)a.disabled=true;this.count++;this.current_element= a}else alert("Error: not a file input element")};this.addListRow=function(a){var b=document.createElement("div"),c=document.createElement("input");c.type="button";c.value="Delete";b.element=a;c.onclick=function(){this.parentNode.element.parentNode.removeChild(this.parentNode.element);this.parentNode.parentNode.removeChild(this.parentNode);this.parentNode.element.multi_selector.count--;return this.parentNode.element.multi_selector.current_element.disabled=false};b.innerHTML=a.value;b.appendChild(c); this.list_target.appendChild(b)}};